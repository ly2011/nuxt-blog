(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{353:function(t,e,c){},354:function(t,e,c){},365:function(t,e,c){"use strict";var n=c(353);c.n(n).a},366:function(t,e,c){"use strict";var n=c(354);c.n(n).a},376:function(t,e,c){"use strict";c.r(e);var n=c(4),o=(c(57),c(6)),r=c(42),l={asyncData:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var c,n,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.store,e.route,n=e.query,o=n.id,r={id:void 0===o?"":o},t.next=5,c.dispatch("topic/getTopic",r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),computed:Object(n.a)({},Object(r.b)({topic:"topic/topic",loading:"topic/loading",loginInfo:"user/loginInfo",accesstoken:"user/accesstoken"}),{isMe:function(){return!(!this.loginInfo||!this.topic.author)&&this.topic.author.loginname===this.loginInfo.loginname}}),methods:{toCollect:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={accesstoken:this.accesstoken,topic_id:this.topic.id},t.prev=1,t.next=4,this.$store.dispatch("topic/collectTopic",e);case 4:t.sent.success?(this.$message({message:"收藏成功",type:"success"}),c=Object(n.a)({},this.topic,{is_collect:!0}),this.$store.dispatch("topic/setTopic",{topic:c})):this.$message({message:"收藏失败",type:"error"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.$message({message:"收藏失败",type:"error"});case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),delCollect:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={accesstoken:this.accesstoken,topic_id:this.topic.id},t.prev=1,t.next=4,this.$store.dispatch("topic/delTopic",e);case 4:t.sent.success?(this.$message({message:"取消收藏成功",type:"success"}),c=Object(n.a)({},this.topic,{is_collect:!1}),this.$store.dispatch("topic/setTopic",{topic:c})):this.$message({message:"取消收藏失败",type:"error"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.$message({message:"取消收藏失败",type:"error"});case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}(),toEdit:function(){this.$router.push({name:"topic-edit",query:{id:this.topic.id}})},toDel:function(){}}},h=(c(365),c(366),c(19)),component=Object(h.a)(l,function(){var t=this,e=t.$createElement,c=t._self._c||e;return c("section",{staticClass:"container"},[c("div",[c("header",{staticClass:"header"},[c("span",{staticClass:"title",domProps:{textContent:t._s(t.topic.title)}}),t._v(" "),c("div",{staticClass:"changes clearfix"},[c("span",[t._v("发布于 "+t._s(t.topic.create_at))]),t._v(" "),c("span",[t._v("作者 "+t._s(t.topic.author&&t.topic.author.loginname))]),t._v(" "),c("span",[t._v(t._s(t.topic.visit_count)+" 次浏览")]),t._v(" "),c("span",[t._v("最后一次编辑是 "+t._s(t.topic.last_reply_at))]),t._v(" "),c("span",[t._v("来自 "+t._s(t.topic.tabName))]),t._v(" "),t.topic.is_collect?c("el-button",{staticClass:"pull-right",attrs:{type:"info",size:"small"},on:{click:t.delCollect}},[t._v("\n          取消收藏\n        ")]):c("el-button",{staticClass:"pull-right",attrs:{type:"success",size:"small"},on:{click:t.toCollect}},[t._v("\n          收藏\n        ")])],1),t._v(" "),c("div",{directives:[{name:"show",rawName:"v-show",value:t.isMe,expression:"isMe"}],staticClass:"manage_topic"},[c("i",{staticClass:"edit-btn el-icon-edit-outline",on:{click:t.toEdit}}),t._v(" "),c("i",{staticClass:"del-btn el-icon-delete",on:{click:t.toDel}})])]),t._v(" "),c("div",{staticClass:"topic"},[c("div",{staticClass:"topic_content",domProps:{innerHTML:t._s(t.topic.content)}})])])])},[],!1,null,"2c03dc01",null);e.default=component.exports}}]);