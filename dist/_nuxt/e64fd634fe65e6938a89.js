(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{350:function(e,t,r){},357:function(e,t,r){"use strict";var n=r(350);r.n(n).a},358:function(e,t,r){},362:function(e,t,r){"use strict";var n={},o=(r(357),r(19)),component=Object(o.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"sidebar"}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"box-card-header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("Markdown 语法参考")])]),e._v(" "),r("div",{staticClass:"box-card-content"},[r("ol",[r("li",[r("tt",[e._v("### 单行的标题")])],1),e._v(" "),r("li",[r("tt",[e._v("**粗体**")])],1),e._v(" "),r("li",[r("tt",[e._v("`console.log('行内代码')`")])],1),e._v(" "),r("li",[r("tt",[e._v("```js\\n code \\n```")]),e._v(" 标记代码块\n        ")],1),e._v(" "),r("li",[r("tt",[e._v("[内容](链接)")])],1),e._v(" "),r("li",[r("tt",[e._v("![文字说明](图片链接)")])],1)]),e._v(" "),r("span",[r("a",{attrs:{href:"https://segmentfault.com/markdown",target:"_blank"}},[e._v("\n          Markdown 文档\n        ")])])])]),e._v(" "),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"box-card-header",attrs:{slot:"header"},slot:"header"},[r("span",[e._v("话题发布指南")])]),e._v(" "),r("div",{staticClass:"box-card-content"},[r("ol",[r("li",[e._v("尽量把话题要点浓缩到标题里")]),e._v(" "),r("li",[e._v("\n          代码含义和报错可在\n          "),r("a",{attrs:{href:"http://segmentfault.com/t/node.js"}},[e._v("\n            SegmentFault\n          ")]),e._v(" 提问\n        ")])])])])],1)},[],!1,null,"735f48ff",null);t.a=component.exports},369:function(e,t,r){"use strict";var n=r(358);r.n(n).a},374:function(e,t,r){"use strict";r.r(t);r(57);var n=r(6),o=r(4),c=r(42),l={components:{EditorSideBar:r(362).a},data:function(){return{searchForm:{tab:"",title:"",content:""},tabs:[{key:"请选择",value:""},{key:"分享",value:"share"},{key:"问答",value:"ask"},{key:"招聘",value:"job"},{key:"客户端测试",value:"dev"}],toolbars:{bold:!0,italic:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,help:!0,fullscreen:!0,preview:!0}}},computed:Object(o.a)({},Object(c.b)({accesstoken:"user/accesstoken",loading:"user/loading"})),methods:{createTopic:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.accesstoken){e.next=3;break}return this.$message({message:"您还没登录，请先去登录再来发表文章",type:"error"}),e.abrupt("return");case 3:if(this.searchForm.tab){e.next=6;break}return this.$message({message:"必须选择一个版块！",type:"error"}),e.abrupt("return");case 6:if(this.searchForm.title){e.next=9;break}return this.$message({message:"标题不能是空的。",type:"error"}),e.abrupt("return");case 9:if(!(this.searchForm.title.length<10||this.searchForm.title.length>100)){e.next=12;break}return this.$message({message:"标题字数太多或太少。",type:"error"}),e.abrupt("return");case 12:if(this.searchForm.content){e.next=15;break}return this.$message({message:"内容不可为空。",type:"error"}),e.abrupt("return");case 15:return t=Object(o.a)({},this.searchForm,{accesstoken:this.accesstoken}),e.prev=16,e.next=19,this.$store.dispatch("topic/addTopic",t);case 19:(r=e.sent).success?(this.$message({message:"添加文章成功",type:"success"}),this.$router.push({name:"topic",query:{id:r.topic_id}})):this.$message({message:"添加文章失败",type:"error"}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(16),this.$message({message:"添加文章失败",type:"error"});case 26:case"end":return e.stop()}},e,this,[[16,23]])}));return function(){return e.apply(this,arguments)}}()}},v=(r(369),r(19)),component=Object(v.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"topic-add-container container"},[r("div",{staticClass:"clearfix",attrs:{id:"main"}},[r("editor-side-bar"),e._v(" "),r("div",{attrs:{id:"content"}},[r("div",{staticClass:"inner"},[r("div",{staticClass:"search-form"},[r("div",{staticClass:"searchForm"},[r("div",{staticClass:"search-form-item"},[r("span",[e._v("选择板块：")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.searchForm.tab,expression:"searchForm.tab"}],attrs:{id:"tab-value",name:"tab"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.searchForm,"tab",t.target.multiple?r:r[0])}}},e._l(e.tabs,function(t,n){return r("option",{key:n,domProps:{value:t.value}},[e._v("\n                  "+e._s(t.key)+"\n                ")])}),0)]),e._v(" "),r("div",{staticClass:"search-form-item"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.searchForm.title,expression:"searchForm.title"}],attrs:{id:"title",autofocus:"",rows:"1",placeholder:"标题字数 10 字以上"},domProps:{value:e.searchForm.title},on:{input:function(t){t.target.composing||e.$set(e.searchForm,"title",t.target.value)}}})])])]),e._v(" "),r("mavon-editor",{ref:"topicContent",attrs:{ishljs:!0,toolbars:e.toolbars},model:{value:e.searchForm.content,callback:function(t){e.$set(e.searchForm,"content","string"==typeof t?t.trim():t)},expression:"searchForm.content"}}),e._v(" "),r("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:e.createTopic}},[e._v("\n          提交\n        ")])],1)])],1)])},[],!1,null,"21f3a5a3",null);t.default=component.exports}}]);