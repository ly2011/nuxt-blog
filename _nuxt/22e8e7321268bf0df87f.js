(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{350:function(t,e,r){},357:function(t,e,r){"use strict";var n=r(350);r.n(n).a},359:function(t,e,r){},362:function(t,e,r){"use strict";var n={},o=(r(357),r(19)),component=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"sidebar"}},[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"box-card-header",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("Markdown 语法参考")])]),t._v(" "),r("div",{staticClass:"box-card-content"},[r("ol",[r("li",[r("tt",[t._v("### 单行的标题")])],1),t._v(" "),r("li",[r("tt",[t._v("**粗体**")])],1),t._v(" "),r("li",[r("tt",[t._v("`console.log('行内代码')`")])],1),t._v(" "),r("li",[r("tt",[t._v("```js\\n code \\n```")]),t._v(" 标记代码块\n        ")],1),t._v(" "),r("li",[r("tt",[t._v("[内容](链接)")])],1),t._v(" "),r("li",[r("tt",[t._v("![文字说明](图片链接)")])],1)]),t._v(" "),r("span",[r("a",{attrs:{href:"https://segmentfault.com/markdown",target:"_blank"}},[t._v("\n          Markdown 文档\n        ")])])])]),t._v(" "),r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"box-card-header",attrs:{slot:"header"},slot:"header"},[r("span",[t._v("话题发布指南")])]),t._v(" "),r("div",{staticClass:"box-card-content"},[r("ol",[r("li",[t._v("尽量把话题要点浓缩到标题里")]),t._v(" "),r("li",[t._v("\n          代码含义和报错可在\n          "),r("a",{attrs:{href:"http://segmentfault.com/t/node.js"}},[t._v("\n            SegmentFault\n          ")]),t._v(" 提问\n        ")])])])])],1)},[],!1,null,"735f48ff",null);e.a=component.exports},370:function(t,e,r){"use strict";var n=r(359);r.n(n).a},379:function(t,e,r){"use strict";r.r(e);var n=r(4),o=(r(57),r(6)),c=r(42),l={components:{EditorSideBar:r(362).a},asyncData:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(e){var r,n,o,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,e.route,n=e.query,o=n.id,c={id:void 0===o?"":o,mdrender:!1},t.next=5,r.dispatch("topic/getTopic",c);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),data:function(){return{searchForm:{tab:"",title:"",content:"",topic_id:null},tabs:[{key:"请选择",value:""},{key:"分享",value:"share"},{key:"问答",value:"ask"},{key:"招聘",value:"job"},{key:"客户端测试",value:"dev"}],toolbars:{bold:!0,italic:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,help:!0,fullscreen:!0,preview:!0}}},computed:Object(n.a)({},Object(c.b)({topic:"topic/topic",accesstoken:"user/accesstoken",loading:"user/loading"})),created:function(){this.topic&&(this.searchForm.topic_id=this.topic.id||null,this.searchForm.tab=this.topic.tab||"",this.searchForm.title=this.topic.title||"",this.searchForm.content=this.topic.content||"")},methods:{createTopic:function(){var t=Object(o.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.accesstoken){t.next=3;break}return this.$message({message:"您还没登录，请先去登录再来发表文章",type:"error"}),t.abrupt("return");case 3:if(this.searchForm.topic_id){t.next=6;break}return this.$message({message:"缺少主题id",type:"error"}),t.abrupt("return");case 6:if(this.searchForm.tab){t.next=9;break}return this.$message({message:"必须选择一个版块！",type:"error"}),t.abrupt("return");case 9:if(this.searchForm.title){t.next=12;break}return this.$message({message:"标题不能是空的。",type:"error"}),t.abrupt("return");case 12:if(!(this.searchForm.title.length<10||this.searchForm.title.length>100)){t.next=15;break}return this.$message({message:"标题字数太多或太少。",type:"error"}),t.abrupt("return");case 15:if(this.searchForm.content){t.next=18;break}return this.$message({message:"内容不可为空。",type:"error"}),t.abrupt("return");case 18:return e=Object(n.a)({},this.searchForm,{accesstoken:this.accesstoken}),t.prev=19,t.next=22,this.$store.dispatch("topic/updateTopic",e);case 22:t.sent.success?(this.$message({message:"添加文章成功",type:"success"}),this.$router.push({name:"topic",query:{id:this.topic.id}})):this.$message({message:"添加文章失败",type:"error"}),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(19),this.$message({message:"添加文章失败",type:"error"});case 29:case"end":return t.stop()}},t,this,[[19,26]])}));return function(){return t.apply(this,arguments)}}()}},h=(r(370),r(19)),component=Object(h.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"topic-add-container container"},[r("div",{staticClass:"clearfix",attrs:{id:"main"}},[r("editor-side-bar"),t._v(" "),r("div",{attrs:{id:"content"}},[r("div",{staticClass:"inner"},[r("div",{staticClass:"search-form"},[r("div",{staticClass:"searchForm"},[r("div",{staticClass:"search-form-item"},[r("span",[t._v("选择板块：")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.tab,expression:"searchForm.tab"}],attrs:{id:"tab-value",name:"tab"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.searchForm,"tab",e.target.multiple?r:r[0])}}},t._l(t.tabs,function(e,n){return r("option",{key:n,domProps:{value:e.value}},[t._v("\n                  "+t._s(e.key)+"\n                ")])}),0)]),t._v(" "),r("div",{staticClass:"search-form-item"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.searchForm.title,expression:"searchForm.title"}],attrs:{id:"title",autofocus:"",rows:"1",placeholder:"标题字数 10 字以上"},domProps:{value:t.searchForm.title},on:{input:function(e){e.target.composing||t.$set(t.searchForm,"title",e.target.value)}}})])])]),t._v(" "),r("mavon-editor",{ref:"topicContent",attrs:{ishljs:!0,toolbars:t.toolbars},model:{value:t.searchForm.content,callback:function(e){t.$set(t.searchForm,"content","string"==typeof e?e.trim():e)},expression:"searchForm.content"}}),t._v(" "),r("el-button",{staticClass:"add-btn",attrs:{type:"primary",size:"small"},on:{click:t.createTopic}},[t._v("\n          提交\n        ")])],1)])],1)])},[],!1,null,"56246cba",null);e.default=component.exports}}]);