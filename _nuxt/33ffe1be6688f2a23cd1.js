(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{360:function(t,e,n){},361:function(t,e,n){},371:function(t,e,n){"use strict";var o=n(360);n.n(o).a},372:function(t,e,n){"use strict";var o=n(361);n.n(o).a},373:function(t,e,n){"use strict";n.r(e);n(43);var o=n(4),r=(n(57),n(6)),c=n(149),l=n(42),d={computed:Object(o.a)({},Object(l.b)({accesstoken:"user/accesstoken",loginInfo:"user/loginInfo",userInfo:"user/userInfo"})),mounted:function(){this.fetchUserInfo()},methods:{fetchUserInfo:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.loginInfo.loginname){t.next=4;break}return t.next=4,this.$store.dispatch("user/getUserInfo",this.loginInfo.loginname);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(0);case 8:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}(),toCreateTopic:function(){this.$router.push({name:"topic-create"})},toLogin:function(){this.$router.push({name:"login"})}}},v=(n(371),n(19)),f={components:{SideBar:Object(v.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{attrs:{id:"sidebar"}},[t.accesstoken?t._e():n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"box-card-header",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("CNode：Node.js专业中文社区")])]),t._v(" "),n("div",{staticClass:"box-card-content login-box"},[n("div",{staticClass:"box-card-content-header"},[t._v("\n        您可以\n        "),n("nuxt-link",{attrs:{to:{name:"login"}}},[t._v("\n          登录\n        ")]),t._v("\n        或\n        "),n("nuxt-link",{attrs:{to:{name:"register"}}},[t._v("\n          注册\n        ")]),t._v("，也可以\n        "),n("el-button",{attrs:{type:"primary"},on:{click:t.toLogin}},[t._v("通过 GitHub 登录")])],1)])]),t._v(" "),t.accesstoken?n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"box-card-header",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("个人信息")])]),t._v(" "),n("div",{staticClass:"box-card-content"},[n("div",{staticClass:"box-card-content-header"},[n("a",{staticClass:"user_avatar",attrs:{href:"javascript:;"}},[n("img",{attrs:{src:t.userInfo.avatar_url,alt:t.userInfo.loginname}})]),t._v(" "),n("span",{staticClass:"user_name"},[t._v("\n          "+t._s(t.userInfo.loginname)+"\n        ")])]),t._v(" "),n("div",{staticClass:"board"},[n("span",[t._v("积分："+t._s(t.userInfo.score))])]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticClass:"signature"},[t._v("\n          “ 这家伙很懒，什么个性签名都没有留下。 ”\n        ")])])])]):t._e(),t._v(" "),t.accesstoken?n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"box-card-content"},[n("el-button",{attrs:{type:"success",size:"small"},on:{click:t.toCreateTopic}},[t._v("\n        发布话题\n      ")])],1)]):t._e()],1)},[],!1,null,"39c1c0b3",null).exports},asyncData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,e.route,e.params,t.next=3,n.dispatch("topics/getTopics");case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),data:function(){return{curTab:this.tab,topTabs:c.a}},computed:Object(o.a)({},Object(l.b)({topics:"topics/topics",loading:"topics/loading",tab:"topics/tab",pageInfo:"topics/pageInfo"})),watch:{tab:function(t){this.curTab=t}},methods:{changeTab:function(t,e){var n=t.name;if(n!==this.tab){var o={tab:n,page:1};this.fetchTopics(o)}},fetchTopics:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading||this.$store.dispatch("topics/getTopics",t)},handleCurrentChange:function(t){var e={tab:this.tab,page:t||1};this.fetchTopics(e)},gotoDetail:function(t){var e=t.id;this.$router.push({name:"topic",query:{id:e}})}}},h=(n(372),Object(v.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"topics-container container"},[n("div",{staticClass:"clearfix",attrs:{id:"main"}},[n("side-bar"),t._v(" "),n("div",{attrs:{id:"content"}},[n("header",{staticClass:"header"},[n("el-tabs",{on:{"tab-click":t.changeTab},model:{value:t.curTab,callback:function(e){t.curTab=e},expression:"curTab"}},t._l(t.topTabs,function(t,e){return n("el-tab-pane",{key:e,attrs:{label:t.title,name:t.tab}})}),1)],1),t._v(" "),n("div",{staticClass:"table-list"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:t.topics}},[n("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"60px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题",align:"center","min-width":"120","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"visit_count",label:"浏览数",align:"center","min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"reply_count",label:"回复数",align:"center","min-width":"120"}}),t._v(" "),n("el-table-column",{attrs:{label:"发表时间",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(e.row.create_at)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small"},on:{click:function(n){t.gotoDetail(e.row)}}},[t._v("\n                详情\n              ")])]}}])})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.pageInfo.total,expression:"pageInfo.total"}],staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":t.pageInfo.page,"page-size":t.pageInfo.limit,layout:"total, prev, pager, next, jumper, slot",total:t.pageInfo.total},on:{"current-change":t.handleCurrentChange}},[n("el-button",{staticClass:"jump-page-btn",attrs:{size:"small",type:"primary"}},[t._v("\n              跳转\n            ")])],1)],1)],1)])],1)])},[],!1,null,"57b294f8",null));e.default=h.exports}}]);